<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Ù†Ù…ÙˆØ¯Ø§Ø±</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<button class="theme-btn" onclick="toggleTheme()">ğŸŒ™ / â˜€ï¸</button>

<div class="card">
<h3 id="welcome"></h3>

<input id="label" placeholder="Ø§Ø³Ù… Ø¯Ø§Ø¯Ù‡" class="input-field">
<input id="value" type="number" placeholder="Ø¹Ø¯Ø¯" class="input-field">

<button onclick="addData()" class="btn">â• Ø§ÙØ²ÙˆØ¯Ù†</button>

<select id="type" class="input-field">
<option value="pie">Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ</option>
<option value="bar">Ù…ÛŒÙ„Ù‡â€ŒØ§ÛŒ</option>
<option value="line">Ø®Ø·ÛŒ</option>
</select>

<button onclick="draw()" class="btn">ğŸ“Š Ø±Ø³Ù… Ù†Ù…ÙˆØ¯Ø§Ø±</button>
<button onclick="downloadImage()" class="btn">ğŸ“· Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¹Ú©Ø³</button>
<button onclick="logout()" class="btn">Ø®Ø±ÙˆØ¬</button>
</div>

<canvas id="chart"></canvas>

<footer class="footer">
<p>Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· AzZ â¤ï¸</p>
<p>HTML | CSS | JS</p>
</footer>

<script>
let labels=[],values=[],myChart;

welcome.innerText="Ø³Ù„Ø§Ù… "+localStorage.getItem("user")+" ğŸ‘‹";

let savedLabels=JSON.parse(localStorage.getItem("labels"));
let savedValues=JSON.parse(localStorage.getItem("values"));
if(savedLabels && savedValues){
    labels=savedLabels;
    values=savedValues;
}

function addData(){
    if(!label.value||!value.value)return;
    labels.push(label.value);
    values.push(value.value);

    localStorage.setItem("labels",JSON.stringify(labels));
    localStorage.setItem("values",JSON.stringify(values));

    label.value=value.value="";
}

function draw(){
    if(myChart) myChart.destroy();
    myChart=new Chart(chart,{
        type:type.value,
        data:{labels:labels,datasets:[{data:values}]}
    });
}

function downloadImage(){
    let link=document.createElement("a");
    link.download="chart.png";
    link.href=document.getElementById("chart").toDataURL();
    link.click();
}

function toggleTheme(){
    document.body.classList.toggle("dark");
    localStorage.setItem("theme",
        document.body.classList.contains("dark")?"dark":"light");
}
if(localStorage.getItem("theme")=="dark")
    document.body.classList.add("dark");

function logout(){
    localStorage.clear();
    location.href="login.html";
}
</script>

</body>
</html>
